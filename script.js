!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=[{code:"Backquote",ru:"ё",en:"`",enSpec:"~"},{code:"Digit1",ru:"1",en:"1",enSpec:"!",ruSpec:"!"},{code:"Digit2",ru:"2",en:"2",enSpec:"@",ruSpec:'"'},{code:"Digit3",ru:"3",en:"3",enSpec:"#",ruSpec:"№"},{code:"Digit4",ru:"4",en:"4",enSpec:"$",ruSpec:";"},{code:"Digit5",ru:"5",en:"5",enSpec:"%",ruSpec:"%"},{code:"Digit6",ru:"6",en:"6",enSpec:"^",ruSpec:":"},{code:"Digit7",ru:"7",en:"7",enSpec:"&",ruSpec:"?"},{code:"Digit8",ru:"8",en:"8",enSpec:"*",ruSpec:"*"},{code:"Digit9",ru:"9",en:"9",enSpec:"(",ruSpec:"("},{code:"Digit0",ru:"0",en:"0",enSpec:")",ruSpec:")"},{code:"Minus",ru:"-",en:"-",enSpec:"_",ruSpec:"_"},{code:"Equal",ru:"=",en:"=",enSpec:"+",ruSpec:"+"},{code:"Backspace",ru:"Backspace",en:"Backspace"},{code:"Tab",ru:"Tab",en:"Tab"},{code:"KeyQ",ru:"й",en:"q"},{code:"KeyW",ru:"ц",en:"w"},{code:"KeyE",ru:"у",en:"e"},{code:"KeyR",ru:"к",en:"r"},{code:"KeyT",ru:"е",en:"t"},{code:"KeyY",ru:"н",en:"y"},{code:"KeyU",ru:"г",en:"u"},{code:"KeyI",ru:"ш",en:"i"},{code:"KeyO",ru:"щ",en:"o"},{code:"KeyP",ru:"з",en:"p"},{code:"BracketLeft",ru:"х",en:"[",enSpec:"{"},{code:"BracketRight",ru:"ъ",en:"]",enSpec:"}"},{code:"Backslash",ru:"\\",en:"\\",enSpec:"|",ruSpec:"/"},{code:"Delete",ru:"Del",en:"Del"},{code:"CapsLock",ru:"Caps Lock",en:"Caps Lock"},{code:"KeyA",ru:"ф",en:"a"},{code:"KeyS",ru:"ы",en:"s"},{code:"KeyD",ru:"в",en:"d"},{code:"KeyF",ru:"а",en:"f"},{code:"KeyG",ru:"п",en:"g"},{code:"KeyH",ru:"р",en:"h"},{code:"KeyJ",ru:"о",en:"j"},{code:"KeyK",ru:"л",en:"k"},{code:"KeyL",ru:"д",en:"l"},{code:"Semicolon",ru:"ж",en:";",enSpec:":"},{code:"Quote",ru:"э",en:'"',enSpec:'"'},{code:"Enter",ru:"Enter",en:"Enter"},{code:"ShiftLeft",ru:"Shift",en:"Shift"},{code:"KeyZ",ru:"я",en:"z"},{code:"KeyX",ru:"ч",en:"x"},{code:"KeyC",ru:"с",en:"c"},{code:"KeyV",ru:"м",en:"v"},{code:"KeyB",ru:"и",en:"b"},{code:"KeyN",ru:"т",en:"n"},{code:"KeyM",ru:"ь",en:"m"},{code:"Comma",ru:"б",en:",",enSpec:"<"},{code:"Dot",ru:"ю",en:".",enSpec:">"},{code:"Slash",ru:".",en:"/",enSpec:"?",ruSpec:","},{code:"ArrowUp",ru:"↑",en:"↑"},{code:"ShiftRight",ru:"Shift",en:"Shift"},{code:"ControlLeft",ru:"Ctrl",en:"Ctrl"},{code:"MetaLeft",ru:"Win",en:"Win"},{code:"AltLeft",ru:"Alt",en:"Alt"},{code:"Space",ru:" ",en:" "},{code:"AltRight",ru:"Alt",en:"Alt"},{code:"ArrowLeft",ru:"←",en:"←"},{code:"ArrowDown",ru:"↓",en:"↓"},{code:"ArrowRight",ru:"→",en:"→"},{code:"ControlRight",ru:"Ctrl",en:"Ctrl"}];const c={lang:"ru",shiftFlag:"off"},o=document.createElement("div");o.className="wrapper",document.body.append(o);const u=document.createElement("textarea");u.className="textarea",u.setAttribute("disabled","disabled"),document.body.querySelector("div").append(u);const d=document.createElement("div");function a(){for(const e in r){const t=document.createElement("div");t.className="btn",t.innerText="en"===c.lang?r[e].en:r[e].ru,t.setAttribute("keyCode",r[e].code),d.appendChild(t)}}function i(){97!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()&&65!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()||(97!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()?d.style.textTransform="none":d.style.textTransform="capitalize"),1060!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()&&1092!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()||(1092!==document.querySelector("div[keycode=KeyA").innerText.charCodeAt()?d.style.textTransform="none":d.style.textTransform="capitalize")}d.className="keyboard",document.body.querySelector("div").append(d),a(),document.addEventListener("keydown",e=>{const t=r.find(t=>t.code===e.code),n=document.querySelector(`div[keycode=${t.code}]`);switch(n.style.background="linear-gradient(rgb(250, 250, 250), rgb(150, 160, 170))",1===t[c.lang].length&&(u.value+=`${n.innerText}`),t.code){case"CapsLock":"capitalize"!==d.style.textTransform?d.style.textTransform="capitalize":d.style.textTransform="none";break;case"ShiftRight":case"ShiftLeft":"off"===c.shiftFlag&&(c.shiftFlag="on",i());break;case"Tab":e.preventDefault(),u.value+="  ",console.log(c.lang);break;case"Backspace":const t=document.querySelector("textarea");t.value=t.value.substr(0,t.value.length-1);break;case"Enter":u.value+="\n"}}),document.addEventListener("keyup",e=>{const t=r.find(t=>t.code===e.code);document.querySelector(`div[keycode=${t.code}]`).style.background="rgb(243, 243, 243)","Shift"===t.en&&(c.shiftFlag="off",i())}),document.querySelector(".keyboard").addEventListener("click",e=>{switch("keyboard"!==e.target.className&&1===e.target.innerText.length&&(u.value+=`${e.target.innerText}`),r.find(t=>t.en===e.target.innerText).en){case"Caps Lock":"capitalize"!==d.style.textTransform?d.style.textTransform="capitalize":d.style.textTransform="none";break;case"Tab":e.preventDefault(),u.value+="  ";break;case"Backspace":const t=document.querySelector("textarea");t.value=t.value.substr(0,t.value.length-1);break;case"Enter":u.value+="\n"}}),document.querySelector(".keyboard").addEventListener("mousedown",e=>{"Shift"===r.find(t=>t.en===e.target.innerText).en&&"off"===c.shiftFlag&&(c.shiftFlag="on",i())}),document.querySelector(".keyboard").addEventListener("mouseup",e=>{const t=r.find(t=>t.en===e.target.innerText);"CapsLock"===t.code&&console.log("batch"),"ShiftRight"!==t.code&&"ShiftLeft"!==t.code||(c.shiftFlag="off",i())}),function(e,...t){const n=new Set;document.addEventListener("keydown",r=>{n.add(r.code);for(const e of t)if(!n.has(e))return;n.clear(),"ru"===e()?c.lang="en":c.lang="ru",d.innerHTML="",a()}),document.addEventListener("keyup",e=>{n.delete(e.code)})}(()=>c.lang,"ControlLeft","AltLeft")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2tleXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwia2V5cyIsImNvZGUiLCJydSIsImVuIiwiZW5TcGVjIiwicnVTcGVjIiwiYXBwU3RhdGUiLCJsYW5nIiwic2hpZnRGbGFnIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZCIsInRleHQiLCJzZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwia2V5Ym9hcmQiLCJkcmF3Qm9hcmQiLCJidG4iLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsInNoaWZ0IiwiY2hhckNvZGVBdCIsInN0eWxlIiwidGV4dFRyYW5zZm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImJ1dHRvbiIsImZpbmQiLCJiYWNrZ3JvdW5kIiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwic3RyaW5nIiwic3Vic3RyIiwidGFyZ2V0IiwiZnVuYyIsImNvZGVzIiwicHJlc3NlZCIsIlNldCIsImFkZCIsImhhcyIsImNsZWFyIiwiaW5uZXJIVE1MIiwi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QUFFRixLQUFNLFdBQVlDLEdBQUksWUFBYUMsR0FBSSxhQUN6QyxDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUFFRixLQUFNLE9BQVFDLEdBQUksSUFBS0MsR0FBSSxLQUM3QixDQUNFRixLQUFNLFlBQWFDLEdBQUksSUFBS0MsR0FBSSxJQUFLQyxPQUFRLEtBRS9DLENBQ0VILEtBQU0sUUFBU0MsR0FBSSxJQUFLQyxHQUFJLElBQUtDLE9BQVEsS0FFM0MsQ0FBRUgsS0FBTSxRQUFTQyxHQUFJLFFBQVNDLEdBQUksU0FDbEMsQ0FBRUYsS0FBTSxZQUFhQyxHQUFJLFFBQVNDLEdBQUksU0FDdEMsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FBRUYsS0FBTSxPQUFRQyxHQUFJLElBQUtDLEdBQUksS0FDN0IsQ0FDRUYsS0FBTSxRQUFTQyxHQUFJLElBQUtDLEdBQUksSUFBS0MsT0FBUSxLQUUzQyxDQUNFSCxLQUFN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QixFQUFLOEIsS0FBTVYsR0FBUUEsRUFBSWpCLEtBQU95QixFQUFNVSxPQUFPakIsV0FDL0NsQixJQUVrQixRQUF2QkcsRUFBU0UsWUFDWEYsRUFBU0UsVUFBWSxLQUNyQmUsT0FLTmIsU0FBU08sY0FBYyxhQUFhVSxpQkFBaUIsVUFBWUMsSUFDL0QsTUFBTUMsRUFBUzdCLEVBQUs4QixLQUFNVixHQUFRQSxFQUFJakIsS0FBT3lCLEVBQU1VLE9BQU9qQixXQUN0QyxhQUFoQlEsRUFBTzVCLE1BQXFCaUMsUUFBUUMsSUFBSSxTQUN4QixlQUFoQk4sRUFBTzVCLE1BQXlDLGNBQWhCNEIsRUFBTzVCLE9BQ3pDSyxFQUFTRSxVQUFZLE1BQ3JCZSxPQUlKLFNBQW1CZ0IsS0FBU0MsR0FDMUIsTUFBTUMsRUFBVSxJQUFJQyxJQUVwQmhDLFNBQVNpQixpQkFBaUIsVUFBWUMsSUFDcENhLEVBQVFFLElBQUlmLEVBQU0zQixNQUdsQixJQUFLLE1BQU1BLEtBQVF1QyxFQUNqQixJQUFLQyxFQUFRRyxJQUFJM0MsR0FDZixPQVVKd0MsRUFBUUksUUFFRyxPQUFYTixJQUFrQmpDLEVBQVNDLEtBQU8sS0FBT0QsRUFBU0MsS0FBTyxLQUN6RFcsRUFBUzRCLFVBQVksR0FDckIzQixNQUdGVCxTQUFTaUIsaUJBQWlCLFFBQVVDLElBQ2xDYSxFQUFRTSxPQUFPbkIsRUFBTTNCLFFBSXpCK0MsQ0FDRSxJQUFNMUMsRUFBU0MsS0FDZixjQUNBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IGtleXMgPSBbXG4gIHtcbiAgICBjb2RlOiAnQmFja3F1b3RlJywgcnU6ICfRkScsIGVuOiAnYCcsIGVuU3BlYzogJ34nLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0RpZ2l0MScsIHJ1OiAnMScsIGVuOiAnMScsIGVuU3BlYzogJyEnLCBydVNwZWM6ICchJyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdEaWdpdDInLCBydTogJzInLCBlbjogJzInLCBlblNwZWM6ICdAJywgcnVTcGVjOiAnXCInLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0RpZ2l0MycsIHJ1OiAnMycsIGVuOiAnMycsIGVuU3BlYzogJyMnLCBydVNwZWM6ICfihJYnLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0RpZ2l0NCcsIHJ1OiAnNCcsIGVuOiAnNCcsIGVuU3BlYzogJyQnLCBydVNwZWM6ICc7JyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdEaWdpdDUnLCBydTogJzUnLCBlbjogJzUnLCBlblNwZWM6ICclJywgcnVTcGVjOiAnJScsXG4gIH0sXG4gIHtcbiAgICBjb2RlOiAnRGlnaXQ2JywgcnU6ICc2JywgZW46ICc2JywgZW5TcGVjOiAnXicsIHJ1U3BlYzogJzonLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0RpZ2l0NycsIHJ1OiAnNycsIGVuOiAnNycsIGVuU3BlYzogJyYnLCBydVNwZWM6ICc/JyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdEaWdpdDgnLCBydTogJzgnLCBlbjogJzgnLCBlblNwZWM6ICcqJywgcnVTcGVjOiAnKicsXG4gIH0sXG4gIHtcbiAgICBjb2RlOiAnRGlnaXQ5JywgcnU6ICc5JywgZW46ICc5JywgZW5TcGVjOiAnKCcsIHJ1U3BlYzogJygnLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0RpZ2l0MCcsIHJ1OiAnMCcsIGVuOiAnMCcsIGVuU3BlYzogJyknLCBydVNwZWM6ICcpJyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdNaW51cycsIHJ1OiAnLScsIGVuOiAnLScsIGVuU3BlYzogJ18nLCBydVNwZWM6ICdfJyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdFcXVhbCcsIHJ1OiAnPScsIGVuOiAnPScsIGVuU3BlYzogJysnLCBydVNwZWM6ICcrJyxcbiAgfSxcbiAgeyBjb2RlOiAnQmFja3NwYWNlJywgcnU6ICdCYWNrc3BhY2UnLCBlbjogJ0JhY2tzcGFjZScgfSxcbiAgeyBjb2RlOiAnVGFiJywgcnU6ICdUYWInLCBlbjogJ1RhYicgfSxcbiAgeyBjb2RlOiAnS2V5UScsIHJ1OiAn0LknLCBlbjogJ3EnIH0sXG4gIHsgY29kZTogJ0tleVcnLCBydTogJ9GGJywgZW46ICd3JyB9LFxuICB7IGNvZGU6ICdLZXlFJywgcnU6ICfRgycsIGVuOiAnZScgfSxcbiAgeyBjb2RlOiAnS2V5UicsIHJ1OiAn0LonLCBlbjogJ3InIH0sXG4gIHsgY29kZTogJ0tleVQnLCBydTogJ9C1JywgZW46ICd0JyB9LFxuICB7IGNvZGU6ICdLZXlZJywgcnU6ICfQvScsIGVuOiAneScgfSxcbiAgeyBjb2RlOiAnS2V5VScsIHJ1OiAn0LMnLCBlbjogJ3UnIH0sXG4gIHsgY29kZTogJ0tleUknLCBydTogJ9GIJywgZW46ICdpJyB9LFxuICB7IGNvZGU6ICdLZXlPJywgcnU6ICfRiScsIGVuOiAnbycgfSxcbiAgeyBjb2RlOiAnS2V5UCcsIHJ1OiAn0LcnLCBlbjogJ3AnIH0sXG4gIHtcbiAgICBjb2RlOiAnQnJhY2tldExlZnQnLCBydTogJ9GFJywgZW46ICdbJywgZW5TcGVjOiAneycsXG4gIH0sXG4gIHtcbiAgICBjb2RlOiAnQnJhY2tldFJpZ2h0JywgcnU6ICfRiicsIGVuOiAnXScsIGVuU3BlYzogJ30nLFxuICB9LFxuICB7XG4gICAgY29kZTogJ0JhY2tzbGFzaCcsIHJ1OiAnXFxcXCcsIGVuOiAnXFxcXCcsIGVuU3BlYzogJ3wnLCBydVNwZWM6ICcvJyxcbiAgfSxcbiAgeyBjb2RlOiAnRGVsZXRlJywgcnU6ICdEZWwnLCBlbjogJ0RlbCcgfSxcbiAgeyBjb2RlOiAnQ2Fwc0xvY2snLCBydTogJ0NhcHMgTG9jaycsIGVuOiAnQ2FwcyBMb2NrJyB9LFxuICB7IGNvZGU6ICdLZXlBJywgcnU6ICfRhCcsIGVuOiAnYScgfSxcbiAgeyBjb2RlOiAnS2V5UycsIHJ1OiAn0YsnLCBlbjogJ3MnIH0sXG4gIHsgY29kZTogJ0tleUQnLCBydTogJ9CyJywgZW46ICdkJyB9LFxuICB7IGNvZGU6ICdLZXlGJywgcnU6ICfQsCcsIGVuOiAnZicgfSxcbiAgeyBjb2RlOiAnS2V5RycsIHJ1OiAn0L8nLCBlbjogJ2cnIH0sXG4gIHsgY29kZTogJ0tleUgnLCBydTogJ9GAJywgZW46ICdoJyB9LFxuICB7IGNvZGU6ICdLZXlKJywgcnU6ICfQvicsIGVuOiAnaicgfSxcbiAgeyBjb2RlOiAnS2V5SycsIHJ1OiAn0LsnLCBlbjogJ2snIH0sXG4gIHsgY29kZTogJ0tleUwnLCBydTogJ9C0JywgZW46ICdsJyB9LFxuICB7XG4gICAgY29kZTogJ1NlbWljb2xvbicsIHJ1OiAn0LYnLCBlbjogJzsnLCBlblNwZWM6ICc6JyxcbiAgfSxcbiAge1xuICAgIGNvZGU6ICdRdW90ZScsIHJ1OiAn0Y0nLCBlbjogJ1wiJywgZW5TcGVjOiAnXCInLFxuICB9LFxuICB7IGNvZGU6ICdFbnRlcicsIHJ1OiAnRW50ZXInLCBlbjogJ0VudGVyJyB9LFxuICB7IGNvZGU6ICdTaGlmdExlZnQnLCBydTogJ1NoaWZ0JywgZW46ICdTaGlmdCcgfSxcbiAgeyBjb2RlOiAnS2V5WicsIHJ1OiAn0Y8nLCBlbjogJ3onIH0sXG4gIHsgY29kZTogJ0tleVgnLCBydTogJ9GHJywgZW46ICd4JyB9LFxuICB7IGNvZGU6ICdLZXlDJywgcnU6ICfRgScsIGVuOiAnYycgfSxcbiAgeyBjb2RlOiAnS2V5VicsIHJ1OiAn0LwnLCBlbjogJ3YnIH0sXG4gIHsgY29kZTogJ0tleUInLCBydTogJ9C4JywgZW46ICdiJyB9LFxuICB7IGNvZGU6ICdLZXlOJywgcnU6ICfRgicsIGVuOiAnbicgfSxcbiAgeyBjb2RlOiAnS2V5TScsIHJ1OiAn0YwnLCBlbjogJ20nIH0sXG4gIHtcbiAgICBjb2RlOiAnQ29tbWEnLCBydTogJ9CxJywgZW46ICcsJywgZW5TcGVjOiAnPCcsXG4gIH0sXG4gIHtcbiAgICBjb2RlOiAnRG90JywgcnU6ICfRjicsIGVuOiAnLicsIGVuU3BlYzogJz4nLFxuICB9LFxuICB7XG4gICAgY29kZTogJ1NsYXNoJywgcnU6ICcuJywgZW46ICcvJywgZW5TcGVjOiAnPycsIHJ1U3BlYzogJywnLFxuICB9LFxuICB7IGNvZGU6ICdBcnJvd1VwJywgcnU6ICfihpEnLCBlbjogJ+KGkScgfSxcbiAgeyBjb2RlOiAnU2hpZnRSaWdodCcsIHJ1OiAnU2hpZnQnLCBlbjogJ1NoaWZ0JyB9LFxuICB7IGNvZGU6ICdDb250cm9sTGVmdCcsIHJ1OiAnQ3RybCcsIGVuOiAnQ3RybCcgfSxcbiAgeyBjb2RlOiAnTWV0YUxlZnQnLCBydTogJ1dpbicsIGVuOiAnV2luJyB9LFxuICB7IGNvZGU6ICdBbHRMZWZ0JywgcnU6ICdBbHQnLCBlbjogJ0FsdCcgfSxcbiAgeyBjb2RlOiAnU3BhY2UnLCBydTogJyAnLCBlbjogJyAnIH0sXG4gIHsgY29kZTogJ0FsdFJpZ2h0JywgcnU6ICdBbHQnLCBlbjogJ0FsdCcgfSxcbiAgeyBjb2RlOiAnQXJyb3dMZWZ0JywgcnU6ICfihpAnLCBlbjogJ+KGkCcgfSxcbiAgeyBjb2RlOiAnQXJyb3dEb3duJywgcnU6ICfihpMnLCBlbjogJ+KGkycgfSxcbiAgeyBjb2RlOiAnQXJyb3dSaWdodCcsIHJ1OiAn4oaSJywgZW46ICfihpInIH0sXG4gIHsgY29kZTogJ0NvbnRyb2xSaWdodCcsIHJ1OiAnQ3RybCcsIGVuOiAnQ3RybCcgfSxcbl07XG5cblxuZXhwb3J0IGRlZmF1bHQga2V5cztcbiIsIi8vIGltcG9ydCBrZXlzIGZyb20gJy4va2V5cyc7XG5pbXBvcnQga2V5cyBmcm9tICcuL2tleXMnO1xuXG5cbmNvbnN0IGFwcFN0YXRlID0ge1xuICBsYW5nOiAncnUnLFxuICBzaGlmdEZsYWc6ICdvZmYnLFxufTtcbmNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuZGl2LmNsYXNzTmFtZSA9ICd3cmFwcGVyJztcbmRvY3VtZW50LmJvZHkuYXBwZW5kKGRpdik7XG5jb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbnRleHQuY2xhc3NOYW1lID0gJ3RleHRhcmVhJztcbnRleHQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCdkaXYnKS5hcHBlbmQodGV4dCk7XG5jb25zdCBrZXlib2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xua2V5Ym9hcmQuY2xhc3NOYW1lID0gJ2tleWJvYXJkJztcbmRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignZGl2JykuYXBwZW5kKGtleWJvYXJkKTtcbmZ1bmN0aW9uIGRyYXdCb2FyZCgpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGd1YXJkLWZvci1pbixuby1yZXN0cmljdGVkLXN5bnRheFxuICBmb3IgKGNvbnN0IGtleSBpbiBrZXlzKSB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnRuLmNsYXNzTmFtZSA9ICdidG4nO1xuICAgIGJ0bi5pbm5lclRleHQgPSBhcHBTdGF0ZS5sYW5nID09PSAnZW4nID8ga2V5c1trZXldLmVuIDoga2V5c1trZXldLnJ1O1xuICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2tleUNvZGUnLCBrZXlzW2tleV0uY29kZSk7XG4gICAga2V5Ym9hcmQuYXBwZW5kQ2hpbGQoYnRuKTtcbiAgfVxufVxuZHJhd0JvYXJkKCk7XG5cbmZ1bmN0aW9uIHNoaWZ0KCkge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2tleWNvZGU9S2V5QScpLmlubmVyVGV4dC5jaGFyQ29kZUF0KCkgPT09IDk3XG4gICAgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2tleWNvZGU9S2V5QScpLmlubmVyVGV4dC5jaGFyQ29kZUF0KCkgPT09IDY1KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuICAgIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZba2V5Y29kZT1LZXlBJykuaW5uZXJUZXh0LmNoYXJDb2RlQXQoKSAhPT0gOTcpXG4gICAgICA/IGtleWJvYXJkLnN0eWxlLnRleHRUcmFuc2Zvcm0gPSAnbm9uZSdcbiAgICAgIDoga2V5Ym9hcmQuc3R5bGUudGV4dFRyYW5zZm9ybSA9ICdjYXBpdGFsaXplJztcbiAgfVxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2tleWNvZGU9S2V5QScpLmlubmVyVGV4dC5jaGFyQ29kZUF0KCkgPT09IDEwNjBcbiAgICB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXZba2V5Y29kZT1LZXlBJykuaW5uZXJUZXh0LmNoYXJDb2RlQXQoKSA9PT0gMTA5Mikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2W2tleWNvZGU9S2V5QScpLmlubmVyVGV4dC5jaGFyQ29kZUF0KCkgIT09IDEwOTIpXG4gICAgICA/IGtleWJvYXJkLnN0eWxlLnRleHRUcmFuc2Zvcm0gPSAnbm9uZSdcbiAgICAgIDoga2V5Ym9hcmQuc3R5bGUudGV4dFRyYW5zZm9ybSA9ICdjYXBpdGFsaXplJztcbiAgfVxufVxuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgLy8gY29uc3Qga2V5Ym9hcmQgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5rZXlib2FyZCcpO1xuICBjb25zdCBidXR0b24gPSBrZXlzLmZpbmQoKGJ0bikgPT4gYnRuLmNvZGUgPT09IGV2ZW50LmNvZGUpO1xuICBjb25zdCBrZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZba2V5Y29kZT0ke2J1dHRvbi5jb2RlfV1gKTtcbiAga2V5LnN0eWxlLmJhY2tncm91bmQgPSAnbGluZWFyLWdyYWRpZW50KHJnYigyNTAsIDI1MCwgMjUwKSwgcmdiKDE1MCwgMTYwLCAxNzApKSc7XG4gIGlmIChidXR0b25bYXBwU3RhdGUubGFuZ10ubGVuZ3RoID09PSAxKSB7XG4gICAgdGV4dC52YWx1ZSArPSBgJHtrZXkuaW5uZXJUZXh0fWA7XG4gIH1cbiAgc3dpdGNoIChidXR0b24uY29kZSkge1xuICAgIGNhc2UgJ0NhcHNMb2NrJzpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICAgIGtleWJvYXJkLnN0eWxlLnRleHRUcmFuc2Zvcm0gIT09ICdjYXBpdGFsaXplJ1xuICAgICAgICA/IGtleWJvYXJkLnN0eWxlLnRleHRUcmFuc2Zvcm0gPSAnY2FwaXRhbGl6ZSdcbiAgICAgICAgOiBrZXlib2FyZC5zdHlsZS50ZXh0VHJhbnNmb3JtID0gJ25vbmUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnU2hpZnRSaWdodCc6XG4gICAgY2FzZSAnU2hpZnRMZWZ0JzpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICAgIGlmIChhcHBTdGF0ZS5zaGlmdEZsYWcgPT09ICdvZmYnKSB7XG4gICAgICAgIGFwcFN0YXRlLnNoaWZ0RmxhZyA9ICdvbic7XG4gICAgICAgIHNoaWZ0KCk7XG4gICAgICB9XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ3VhcmQtZm9yLWluLG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICBicmVhaztcbiAgICBjYXNlICdUYWInOlxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRleHQudmFsdWUgKz0gJyAgJztcbiAgICAgIGNvbnNvbGUubG9nKGFwcFN0YXRlLmxhbmcpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnQmFja3NwYWNlJzpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucyxuby11bnVzZWQtdmFyc1xuICAgICAgY29uc3Qgc3RyaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcbiAgICAgIHN0cmluZy52YWx1ZSA9IHN0cmluZy52YWx1ZS5zdWJzdHIoMCwgc3RyaW5nLnZhbHVlLmxlbmd0aCAtIDEpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRW50ZXInOlxuICAgICAgdGV4dC52YWx1ZSArPSAnXFxuJztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBjb25zdCBidXR0b24gPSBrZXlzLmZpbmQoKGJ0bikgPT4gYnRuLmNvZGUgPT09IGV2ZW50LmNvZGUpO1xuICBjb25zdCBrZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZba2V5Y29kZT0ke2J1dHRvbi5jb2RlfV1gKTtcbiAga2V5LnN0eWxlLmJhY2tncm91bmQgPSAncmdiKDI0MywgMjQzLCAyNDMpJztcbiAgaWYgKGJ1dHRvbi5lbiA9PT0gJ1NoaWZ0Jykge1xuICAgIGFwcFN0YXRlLnNoaWZ0RmxhZyA9ICdvZmYnO1xuICAgIHNoaWZ0KCk7XG4gIH1cbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcua2V5Ym9hcmQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2tleWJvYXJkJyAmJiBldmVudC50YXJnZXQuaW5uZXJUZXh0Lmxlbmd0aCA9PT0gMSkge1xuICAgIHRleHQudmFsdWUgKz0gYCR7ZXZlbnQudGFyZ2V0LmlubmVyVGV4dH1gO1xuICB9XG4gIGNvbnN0IGJ1dHRvbiA9IGtleXMuZmluZCgoYnRuKSA9PiBidG4uZW4gPT09IGV2ZW50LnRhcmdldC5pbm5lclRleHQpO1xuICBzd2l0Y2ggKGJ1dHRvbi5lbikge1xuICAgIGNhc2UgJ0NhcHMgTG9jayc6XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gICAgICBrZXlib2FyZC5zdHlsZS50ZXh0VHJhbnNmb3JtICE9PSAnY2FwaXRhbGl6ZSdcbiAgICAgICAgPyBrZXlib2FyZC5zdHlsZS50ZXh0VHJhbnNmb3JtID0gJ2NhcGl0YWxpemUnXG4gICAgICAgIDoga2V5Ym9hcmQuc3R5bGUudGV4dFRyYW5zZm9ybSA9ICdub25lJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ1RhYic6XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGV4dC52YWx1ZSArPSAnICAnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnQmFja3NwYWNlJzpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucyxuby11bnVzZWQtdmFyc1xuICAgICAgY29uc3Qgc3RyaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcbiAgICAgIHN0cmluZy52YWx1ZSA9IHN0cmluZy52YWx1ZS5zdWJzdHIoMCwgc3RyaW5nLnZhbHVlLmxlbmd0aCAtIDEpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRW50ZXInOlxuICAgICAgdGV4dC52YWx1ZSArPSAnXFxuJztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rZXlib2FyZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICBjb25zdCBidXR0b24gPSBrZXlzLmZpbmQoKGJ0bikgPT4gYnRuLmVuID09PSBldmVudC50YXJnZXQuaW5uZXJUZXh0KTtcbiAgaWYgKGJ1dHRvbi5lbiA9PT0gJ1NoaWZ0Jykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICBpZiAoYXBwU3RhdGUuc2hpZnRGbGFnID09PSAnb2ZmJykge1xuICAgICAgYXBwU3RhdGUuc2hpZnRGbGFnID0gJ29uJztcbiAgICAgIHNoaWZ0KCk7XG4gICAgfVxuICB9XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkJykuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICBjb25zdCBidXR0b24gPSBrZXlzLmZpbmQoKGJ0bikgPT4gYnRuLmVuID09PSBldmVudC50YXJnZXQuaW5uZXJUZXh0KTtcbiAgaWYgKGJ1dHRvbi5jb2RlID09PSAnQ2Fwc0xvY2snKSBjb25zb2xlLmxvZygnYmF0Y2gnKTtcbiAgaWYgKGJ1dHRvbi5jb2RlID09PSAnU2hpZnRSaWdodCcgfHwgYnV0dG9uLmNvZGUgPT09ICdTaGlmdExlZnQnKSB7XG4gICAgYXBwU3RhdGUuc2hpZnRGbGFnID0gJ29mZic7XG4gICAgc2hpZnQoKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHJ1bk9uS2V5cyhmdW5jLCAuLi5jb2Rlcykge1xuICBjb25zdCBwcmVzc2VkID0gbmV3IFNldCgpO1xuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICBwcmVzc2VkLmFkZChldmVudC5jb2RlKTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciAoY29uc3QgY29kZSBvZiBjb2RlcykgeyAvLyDQstGB0LUg0LvQuCDQutC70LDQstC40YjQuCDQuNC3INC90LDQsdC+0YDQsCDQvdCw0LbQsNGC0Ys/XG4gICAgICBpZiAoIXByZXNzZWQuaGFzKGNvZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDQtNCwLCDQstGB0LVcblxuICAgIC8vINCy0L4g0LLRgNC10LzRjyDQv9C+0LrQsNC30LAgYWxlcnQsINC10YHQu9C4INC/0L7RgdC10YLQuNGC0LXQu9GMINC+0YLQv9GD0YHRgtC40YIg0LrQu9Cw0LLQuNGI0LggLSDQvdC1INCy0L7Qt9C90LjQutC90LXRgiBrZXl1cFxuICAgIC8vINC/0YDQuCDRjdGC0L7QvCBKYXZhU2NyaXB0IFwi0L/RgNC+0L/Rg9GB0YLQuNGCXCIg0YTQsNC60YIg0L7RgtC/0YPRgdC60LDQvdC40Y8g0LrQu9Cw0LLQuNGILCDQsCBwcmVzc2VkW2tleUNvZGVdINC+0YHRgtCw0L3QtdGC0YHRjyB0cnVlXG4gICAgLy8g0YfRgtC+0LHRiyDQuNC30LHQtdC20LDRgtGMIFwi0LfQsNC70LjQv9Cw0L3QuNGPXCIg0LrQu9Cw0LLQuNGI0LggLS0g0L7QsdC90YPQu9GP0LXQvCDRgdGC0LDRgtGD0YEg0LLRgdC10YUg0LrQu9Cw0LLQuNGILCDQv9GD0YHRgtGMINC90LDQttC40LzQsNC10YIg0LLRgdGRINC30LDQvdC+0LLQvlxuXG4gICAgcHJlc3NlZC5jbGVhcigpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICBmdW5jKCkgPT09ICdydScgPyBhcHBTdGF0ZS5sYW5nID0gJ2VuJyA6IGFwcFN0YXRlLmxhbmcgPSAncnUnO1xuICAgIGtleWJvYXJkLmlubmVySFRNTCA9ICcnO1xuICAgIGRyYXdCb2FyZCgpO1xuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xuICAgIHByZXNzZWQuZGVsZXRlKGV2ZW50LmNvZGUpO1xuICB9KTtcbn1cblxucnVuT25LZXlzKFxuICAoKSA9PiBhcHBTdGF0ZS5sYW5nLFxuICAnQ29udHJvbExlZnQnLFxuICAnQWx0TGVmdCcsXG4pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==